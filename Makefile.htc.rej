--- Makefile.htc
+++ Makefile.htc
@@ -8,4 +8,5 @@ VERSION = $(VERSION_MAJOR).$(VERSION_MINOR).$(VERSION_PATCH)
 
+OS := $(shell uname -s)
 
-PROGRAMFILES = C:/Program Files (x86)
+PROGRAMFILES = c:/Program\ Files\ \(x86\)
 
@@ -13,8 +14,8 @@ PROGRAMFILES = C:/Program Files (x86)
 #ifeq ($(shell uname -o),GNU/Linux)
-ifeq ($(COMPILER),xc8)
-CCVER = 1.34
+CCVER = 1.35
+
+ifeq ($(OS),Linux)
 CCDIR = /opt/microchip/xc8/v$(CCVER)
 else
-CCVER = 9.83
-CCDIR = "$(PROGRAMFILES)"/HI-TECH\ Software/PICC/$(CCVER)
+CCDIR = $(PROGRAMFILES)/Microchip/xc8/$(CCVER)
 endif
@@ -24,5 +25,5 @@ endif
 ifneq ($(CCDIR),)
-CC = $(CCDIR)/bin/picc
+CC = $(CCDIR)/bin/$(COMPILER)
 else
-CC = picc
+CC = $(COMPILER)
 endif
